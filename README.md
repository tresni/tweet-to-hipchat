# TweetChat

Monitor twitter handle for new messages and post it to an HipChat room.

Redis is used to maintain state between runs without requiring writing to any
local file.  This could be changed to use [nconf](https://www.npmjs.org/package/nconf)
or a config.json, but this works for now.

## Setup

### Prerequisites

* Hipchat API Token
* Twitter API Key/Secret  
  You can create an application at https://apps.twitter.com/ to get these.

### Configuration
Currently the following enviromental variables are used:

<dl>

<dt>`HIPCHAT_TOKEN`</dt>
<dd>Token generated by HipChat for use with API calls.  This can be a global
 token or room specific.  
 See https://www.hipchat.com/docs/apiv2/auth .</dd>

<dt>`HIPCHAT_ROOM`</dt>
<dd>The room you would like to send notification too, this can either be the id
number or room name.</dd>

<dt>`HIPCHAT_NOTIFY`</dt>
<dd>Set this to `false` to turn off notifications, if it is missing or any other
value, then notification will be sent to all room members.  
See https://www.hipchat.com/docs/apiv2/method/send_room_notification</dd>

<dt>`TWITTER_HANDLE`</dt>
<dd>The twitter handle to retrieve the timeline of</dd>

<dt>`TWITTER_KEY`</dt>
<dd>Your Twitter API key</dd>

<dt>`TWITTER_SECRET`</dt>
<dd>Your Twitter API secret</dd>

<dt>`REDIS_SOCKET`</dt>
<dd>**Default:** undefined  
Path to the UNIX socket for Redis</dd>

<dt>`REDIS_HOST`</dt>
<dd>**Default:** localhost  
Hostname or IP address of your Redis server</dd>

<dt>`REDIS_PORT`</dt>
<dd>**Default:** 6379  
Port your Redis server is running on.</dd>

**Note: ** If you do not supply `REDIS_SOCKET` or `REDIS_HOST` and `REDIS_PORT`,
then we will attempt to connect to the default Redis configuration of localhost
on port 6379.  `REDIS_SOCKET` takes precedence.

### Monitoring

I am using [daemontools/supervise](http://cr.yp.to/daemontools/supervise.html)
to run and monitor this job.  You can do it however you want.  The key is that
all configuration is supplied through environmental variables.

My run script consists of the following:

```sh
#! /bin/bash

envdir env node main.js
sleep 60
```
